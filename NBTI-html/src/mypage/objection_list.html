<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>이의제기 내역</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.8/dist/web/static/pretendard.css">
  <style>
    body {
      font-family: 'Pretendard', sans-serif;
      margin: 0;
      background: #f8f9fa;
      color: #333;
    }
    .header {
      background: #fff;
      border-bottom: 1px solid #ddd;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .header .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: #007bff;
    }
    .header .menu a {
      margin-left: 1rem;
      text-decoration: none;
      color: #333;
    }
    .layout {
      display: flex;
    }
    .sidebar {
      width: 220px;
      background: #ffffff;
      border-right: 1px solid #ddd;
      padding: 2rem 1rem;
      height: 100vh;
      box-sizing: border-box;
      position: sticky;
      top: 0;
    }
    .sidebar h3 {
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }
    .sidebar a {
      display: block;
      padding: 0.75rem 1rem;
      margin-bottom: 0.5rem;
      border-radius: 8px;
      text-decoration: none;
      color: #333;
    }
    .sidebar a:hover,
    .sidebar a.active {
      background: #e9f0ff;
      color: #007bff;
      font-weight: 500;
    }
    .content {
      flex: 1;
      padding: 2rem;
    }
    .section h2 {
      font-size: 1.5rem;
      border-bottom: 2px solid #ddd;
      padding-bottom: 0.5rem;
      margin-bottom: 2rem;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
    }
    .filter-bar {
      margin-bottom: 1.5rem;
    }
    .filter-bar select {
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    .table th,
    .table td {
      border: 1px solid #ddd;
      padding: 0.75rem;
      text-align: center;
    }
    .table tr:hover {
      background: #f1f5ff;
      cursor: pointer;
    }
    .status {
      padding: 0.3rem 0.6rem;
      border-radius: 6px;
      font-size: 0.85rem;
      font-weight: 500;
    }
    .status.pending { background: #e0f3ff; color: #007bff; }
    .status.processing { background: #fff3cd; color: #856404; }
    .status.rejected { background: #f8d7da; color: #a94442; }
    .status.accepted { background: #d4edda; color: #155724; }
    .btn {
      padding: 0.4rem 0.8rem;
      border: none;
      background: #007bff;
      color: #fff;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background-color: rgba(0, 0, 0, 0.4);
      align-items: center;
      justify-content: center;
      padding: 1rem;
      box-sizing: border-box;
    }

    .modal-container {
      background: #fff;
      border-radius: 20px;
      max-width: 640px;
      width: 100%;
      padding: 2.5rem 2rem;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18);
    }

    .modal-title {
      font-size: 1.375rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
      color: #111;
    }

    .modal-sub {
      font-size: 0.95rem;
      color: #666;
      margin-bottom: 2.5rem;
    }

    .section-title {
      font-size: 1rem;
      font-weight: 600;
      color: #6c4ab6;
      border-left: 4px solid #6c4ab6;
      padding-left: 0.6rem;
      margin: 3rem 0 1.2rem;
    }

    .info-grid {
      display: flex;
      justify-content: space-between;
      flex-wrap: nowrap;
      gap: 1rem;
      line-height: 1.4;
    }

    .info-item {
      flex: 1 1 45%;
      font-size: 0.95rem;
    }

    .info-item .label {
      font-weight: 600;
      color: #555;
      margin-bottom: 0.25rem;
      display: block;
    }

    .status-tag {
      display: inline-block;
      padding: 0.4rem 0.85rem;
      border-radius: 999px;
      font-size: 0.85rem;
      font-weight: 500;
      background: #e6f1ff;
      color: #007bff;
    }
    .status-tag.accepted { background: #e8f5e9; color: #2e7d32; }
    .status-tag.rejected { background: #fdecea; color: #d32f2f; }
    .status-tag.processing { background: #fff3cd; color: #ff9800; }

    .reason-box {
      background: #f5f5f5;
      border-radius: 12px;
      padding: 1.2rem;
      font-size: 1rem;
      line-height: 1.6;
      color: #333;
    }

    .modal-footer {
      margin-top: 3rem;
      text-align: right;
    }

    .btn-close {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 0.7rem 1.5rem;
      font-size: 0.95rem;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .btn-close:hover {
      background: #2563eb;
    }

    .status-tag {
      display: inline-block;
      padding: 0.35rem 0.75rem;
      border-radius: 999px;
      font-size: 0.82rem;
      font-weight: 500;
      background: #e6f1ff;
      color: #007bff;
    }
    .status-tag.accepted { background: #e8f5e9; color: #2e7d32; }
    .status-tag.rejected { background: #fdecea; color: #d32f2f; }
    .status-tag.processing { background: #fff3cd; color: #ff9800; }
  </style>
</head>
<body>

<header class="header">
  <div class="logo">두뇌 트레이닝</div>
  <nav class="menu">
    <a href="test_study.html">검사 및 학습</a>
    <a href="mypage.html">마이페이지</a>
    <a href="#">로그아웃</a>
  </nav>
</header>

<div class="layout">
  <aside class="sidebar">
    <h3>마이페이지</h3>
    <a href="mypage.html">검사 결과 및 통계</a>
    <a href="study_list.html">학습 결과 내역</a>
    <a href="objection_list.html" class="active">이의제기 내역</a>
    <a href="userinfo.html">개인정보 조회</a>
  </aside>

  <main class="content">
    <section class="section">
      <h2>이의제기 내역 조회</h2>

      <div class="card">
        <!-- 필터 -->
        <div class="filter-bar">
          <label for="statusFilter">상태</label>
          <select id="statusFilter">
            <option>전체</option>
            <option>접수됨</option>
            <option>반려</option>
            <option>승인</option>
          </select>
        </div>

        <!-- 이의제기 테이블 -->
        <table class="table">
          <thead>
          <tr>
            <th>분야</th>
            <th>제출 일시</th>
            <th>사유</th>
            <th>상태</th>
            <th>상세 보기</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>언어 이해</td>
            <td>2025-05-12 10:22</td>
            <td>문제에 명확한 정답이 없다고 생각합니다.</td>
            <td><span class="status pending">접수됨</span></td>
            <td>
              <button class="btn" onclick='openObjectionModal({
        target: "문제 P001",
        submittedAt: "2025-05-12 10:22",
        reason: "문제에 명확한 정답이 없다고 생각합니다.",
        statusLabel: "접수됨",
        statusClass: "pending",
        answer: null
      })'>보기</button>
            </td>
          </tr>
          <tr>
            <td>지각 추론</td>
            <td>2025-05-10 14:11</td>
            <td>보기 중 두 개 이상 정답으로 보입니다.</td>
            <td><span class="status pending">대기</span></td>
            <td>
              <button class="btn" onclick='openObjectionModal({
        target: "문제 P002",
        submittedAt: "2025-05-10 14:11",
        reason: "보기 중 두 개 이상 정답으로 보입니다.",
        statusLabel: "대기",
        statusClass: "pending",
        answer: null
      })'>보기</button>
            </td>
          </tr>
          <tr>
            <td>처리 속도</td>
            <td>2025-05-08 09:03</td>
            <td>문제 이미지가 불러와지지 않습니다.</td>
            <td><span class="status rejected">반려</span></td>
            <td>
              <button class="btn" onclick='openObjectionModal({
        target: "문제 P003",
        submittedAt: "2025-05-08 09:03",
        reason: "문제 이미지가 불러와지지 않습니다.",
        statusLabel: "반려",
        statusClass: "rejected",
        answer: "이미지 경로가 정상이며 테스트 결과 문제없이 출력됨을 확인했습니다."
      })'>보기</button>
            </td>
          </tr>
          <tr>
            <td>공간 지각력</td>
            <td>2025-05-05 17:40</td>
            <td>정답과 다른 해설이 보여집니다.</td>
            <td><span class="status accepted">승인</span></td>
            <td>
              <button class="btn" onclick='openObjectionModal({
        target: "문제 P004",
        submittedAt: "2025-05-05 17:40",
        reason: "정답과 다른 해설이 보여집니다.",
        statusLabel: "승인",
        statusClass: "accepted",
        answer: "문제 해설 오류를 확인하고 정정했습니다. 제안 감사합니다."
      })'>보기</button>
            </td>
          </tr>
          </tbody>

        </table>
      </div>
    </section>
  </main>
</div>

<div class="modal" id="objectionDetailModal">
  <div class="modal-container">
    <div class="modal-title">이의제기 상세 정보</div>
    <div class="modal-sub">이의제기 사유와 상태를 확인하고 필요시 관리자 대응 결과를 검토하세요.</div>

    <div class="section">
      <div class="section-title">이의제기 정보</div>
      <div class="info-grid">
        <div class="info-item">
          <span>이의제기 대상</span>
          <div id="detail-target">문제 P001</div>
        </div>
        <div class="info-item">
          <span>제출 일시</span>
          <div id="detail-submitted-at">2025-05-12 10:22</div>
        </div>
        <div class="info-item">
          <span>처리 상태</span>
          <div><span id="detail-status" class="status-tag">접수됨</span></div>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="section-title">이의제기 사유</div>
      <div class="reason-box" id="detail-reason">
        문제에 명확한 정답이 없다고 생각합니다.
      </div>
    </div>

    <div class="section" id="admin-answer-row" style="display:none">
      <div class="section-title">관리자 답변</div>
      <div class="reason-box" id="detail-answer">
        출제 오류가 확인되어 문제를 수정 조치했습니다. 제안 감사합니다.
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-close" onclick="closeObjectionModal()">닫기</button>
    </div>
  </div>
</div>
<script>
  function openObjectionModal(data) {
    document.getElementById("detail-target").textContent = data.target;
    document.getElementById("detail-submitted-at").textContent = data.submittedAt;
    document.getElementById("detail-reason").textContent = data.reason;

    const statusEl = document.getElementById("detail-status");
    statusEl.textContent = data.statusLabel;
    statusEl.className = 'status-tag ' + data.statusClass;

    if (data.answer) {
      document.getElementById("admin-answer-row").style.display = 'block';
      document.getElementById("detail-answer").textContent = data.answer;
    } else {
      document.getElementById("admin-answer-row").style.display = 'none';
    }

    document.getElementById("objectionDetailModal").style.display = "flex";
  }

  function closeObjectionModal() {
    document.getElementById("objectionDetailModal").style.display = "none";
  }
</script>
</body>
</html>
